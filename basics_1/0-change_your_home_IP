#!/usr/bin/env bash
# Script that configures an Ubuntu server to:
# - Make localhost resolve to 127.0.0.2
# - Make facebook.com resolve to 8.8.8.8

# Backup the original /etc/hosts file
cp /etc/hosts /etc/hosts.backup

# Create a new hosts file with modified entries
{
    # Keep all lines that don't contain localhost or facebook.com
    grep -v "localhost" /etc/hosts | grep -v "facebook.com"
    # Add our custom entries
    echo "127.0.0.2 localhost"
    echo "8.8.8.8 facebook.com"
} > /tmp/hosts_new

# Replace the hosts file
cp /tmp/hosts_new /etc/hosts
rm /tmp/hosts_new
